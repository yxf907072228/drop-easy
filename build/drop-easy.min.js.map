{"version":3,"file":"drop-easy.min.js","sources":["../src/index.ts"],"sourcesContent":["\r\ninterface DropFunc {\r\n    (e:any):void\r\n}\r\n\r\ninterface DropOption {\r\n    el: Element,\r\n    onDrop?: DropFunc\r\n}\r\n\r\n\r\nfunction readEntitys(entitys:Array<any>){\r\n    return Promise.all(entitys.map((entity)=>{\r\n        return new Promise((resolve, reject)=>{\r\n            if(entity.isDirectory){\r\n                //\r\n                \r\n                let dirReader = entity.createReader();\r\n                dirReader.readEntries((results:Array<any>)=>{\r\n                    readEntitys(results).then((list)=>{\r\n                        resolve({name:entity.name,childs:list})\r\n                    })\r\n                })\r\n\r\n            }else{\r\n                entity.file((file:File)=>{\r\n                    resolve(file);\r\n                })\r\n            }\r\n        })\r\n    }))\r\n}\r\n\r\nexport default function (options: DropOption) {\r\n    let { el, onDrop } = options\r\n    \r\n    document.addEventListener(\"dragleave\",function(e){\r\n            e.preventDefault();\r\n    })\r\n\r\n    document.addEventListener(\"drop\",function(e){\r\n            e.preventDefault();\r\n    })\r\n\r\n    document.addEventListener(\"dragenter\",function(e){\r\n            e.preventDefault();\r\n    })\r\n\r\n    document.addEventListener(\"dragover\",function(e){\r\n            e.preventDefault();\r\n    })\r\n\r\n    el.addEventListener('drop',(e:any)=>{\r\n        \r\n        let fileList = e.dataTransfer.items\r\n        readEntitys(Array.from(fileList).map((item:any)=>{\r\n            let file = item.webkitGetAsEntry()\r\n            return file\r\n        })).then((results)=>{\r\n            console.log(results)\r\n        })\r\n\r\n        e.preventDefault()\r\n    })\r\n}\r\n\r\n "],"names":["options","el","onDrop","document","addEventListener","e","preventDefault","fileList","dataTransfer","items","entitys","Promise","all","map","entity","resolve","reject","isDirectory","createReader","readEntries","results","readEntitys","then","list","name","childs","file","Array","from","item","webkitGetAsEntry","console","log"],"mappings":"4CAiCA,SAAyBA,GACrB,IAAIC,GAAEA,EAAEC,OAAEA,GAAWF,EAErBG,SAASC,iBAAiB,YAAY,SAASC,GACvCA,EAAEC,mBAGVH,SAASC,iBAAiB,OAAO,SAASC,GAClCA,EAAEC,mBAGVH,SAASC,iBAAiB,YAAY,SAASC,GACvCA,EAAEC,mBAGVH,SAASC,iBAAiB,WAAW,SAASC,GACtCA,EAAEC,mBAGVL,EAAGG,iBAAiB,OAAQC,IAExB,IAAIE,EAAWF,EAAEG,aAAaC,OA3CtC,WAAqBC,GACjB,OAAOC,QAAQC,IAAIF,EAAQG,IAAKC,GACrB,IAAIH,QAAQ,CAACI,EAASC,KACtBF,EAAOG,YAGUH,EAAOI,eACbC,YAAaC,IACnBC,EAAYD,GAASE,KAAMC,IACvBR,GAASS,KAAKV,EAAOU,KAAKC,OAAOF,QAKzCT,EAAOY,KAAMA,IACTX,EAAQW,UA6BpBL,CAAYM,MAAMC,KAAKrB,GAAUM,IAAKgB,GACvBA,EAAKC,qBAEhBR,KAAMF,IACNW,QAAQC,IAAIZ,KAGhBf,EAAEC"}